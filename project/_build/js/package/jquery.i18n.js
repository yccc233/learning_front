!function(l){"use strict";var i,o=Array.prototype.slice;(i=function(e){this.options=l.extend({},i.defaults,e),this.parser=this.options.parser,this.locale=this.options.locale,this.messageStore=this.options.messageStore,this.languages={}}).prototype={localize:function(e){for(var a,n,t,o=this.locale,i=0;o;){n=(a=o.split("-")).length;do{if(t=a.slice(0,n).join("-"),t=this.messageStore.get(t,e))return t}while(--n);if(o===this.options.fallbackLocale)break;o=l.i18n.fallbacks[this.locale]&&l.i18n.fallbacks[this.locale][i]||this.options.fallbackLocale,l.i18n.log("Trying fallback locale for "+this.locale+": "+o+" ("+e+")"),i++}return""},destroy:function(){l.removeData(document,"i18n")},load:function(e,a){var n,t,o,i={};if(e||a||(e="i18n/"+l.i18n().locale+".json",a=l.i18n().locale),"string"!=typeof e||"json"===e.split("?")[0].split(".").pop())return this.messageStore.load(e,a);for(i[a]=e+"/"+a+".json",n=(l.i18n.fallbacks[a]||[]).concat(this.options.fallbackLocale),t=0;t<n.length;t++)i[o=n[t]]=e+"/"+o+".json";return this.load(i)},parse:function(e,a){var n=this.localize(e);return this.parser.language=l.i18n.languages[l.i18n().locale]||l.i18n.languages.default,this.parser.parse(n=""===n?e:n,a)}},l.i18n=function(e,a){var n=l.data(document,"i18n"),t="object"==typeof e&&e;return t&&t.locale&&n&&n.locale!==t.locale&&(n.locale=t.locale),n||(n=new i(t),l.data(document,"i18n",n)),"string"==typeof e?(a=void 0!==a?o.call(arguments,1):[],n.parse(e,a)):n},l.fn.i18n=function(){var o=l.data(document,"i18n");return o||(o=new i,l.data(document,"i18n",o)),this.each(function(){var e,a,n=l(this),t=n.data("i18n");t?(e=t.indexOf("["),a=t.indexOf("]"),-1!==e&&-1!==a&&e<a?(e=t.slice(e+1,a),a=t.slice(a+1),"html"===e?n.html(o.parse(a)):n.attr(e,o.parse(a))):n.text(o.parse(t))):n.find("[data-i18n]").i18n()})},l.i18n.languages={},l.i18n.messageStore=l.i18n.messageStore||{},l.i18n.parser={parse:function(e,t){return e.replace(/\$(\d+)/g,function(e,a){var n=parseInt(a,10)-1;return void 0!==t[n]?t[n]:"$"+a})},emitter:{}},l.i18n.fallbacks={},l.i18n.debug=!1,l.i18n.log=function(){window.console&&l.i18n.debug&&window.console.log.apply(window.console,arguments)},i.defaults={locale:l("html").attr("lang")||navigator.language||navigator.userLanguage||"",fallbackLocale:"en",parser:l.i18n.parser,messageStore:l.i18n.messageStore},l.i18n.constructor=i}(jQuery);